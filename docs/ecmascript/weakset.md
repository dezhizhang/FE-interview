# Set 和 WeakSet 的区别

`Set` 和 `WeakSet` 是 JavaScript 中两种用于存储唯一值的集合数据结构，但它们在一些关键特性和用途上有显著的区别。

## 1. 基本概念

### Set

- **定义**：`Set` 是一种集合类型，允许存储任何类型的唯一值，包括基本类型和引用类型。
- **特性**：
  - 值是唯一的，即不能存储重复的值。
  - 可以存储任何类型的对象和基本类型。
  - 对存储的值持有强引用（strong reference），这意味着即使没有其他引用，集合中的对象也不会被垃圾回收。

### WeakSet

- **定义**：`WeakSet` 是一种弱引用集合，只能包含对象类型的值，不能存储基本类型（如数字、字符串等）。
- **特性**：
  - 只能包含对象，且对象是弱引用（weak reference），如果没有其他引用指向该对象，则它会被垃圾回收。
  - 不支持对集合的大小进行检查（没有 `size` 属性）。
  - 不支持遍历操作（没有 `forEach`、`keys`、`values` 等方法），这意味着无法枚举 `WeakSet` 中的元素。

## 2. API 对比

| 方法          | Set              | WeakSet            |
|---------------|------------------|--------------------|
| `add(value)`  | 可以添加任意类型的值 | 只能添加对象       |
| `has(value)`  | 检查值是否存在    | 检查对象是否存在    |
| `delete(value)` | 删除指定值      | 删除指定对象       |
| `clear()`     | 清空集合         | 不可用             |
| `size`        | 支持             | 不支持             |
| 遍历          | 支持             | 不支持             |

## 3. 应用场景

### Set

- **存储唯一值**：用于存储一组唯一值，如标签、分类等。
- **快速查找**：由于其内部实现，`Set` 提供了快速查找值的能力。
- **集合运算**：可用于集合的交集、并集和差集运算。

### WeakSet

- **内存管理**：由于 WeakSet 对对象的弱引用特性，非常适合用于管理那些可能被其他代码清理的对象，避免内存泄漏。
- **隐私和封装**：可以存储对象而不阻止其被垃圾回收，这在实现私有数据或内部状态时非常有用。
- **事件监听**：用于存储事件监听器的对象，确保监听器在对象不再被引用时能被垃圾回收。

## 4. 总结

- `Set` 和 `WeakSet` 都是用于存储唯一值的集合，但 `Set` 可以存储任何类型的值，而 `WeakSet` 只能存储对象且持有弱引用。
- `Set` 支持遍历、大小检查等功能，而 `WeakSet` 由于其设计，不支持这些功能，适合用于内存管理和隐私保护场景。

通过选择适当的数据结构，可以在 JavaScript 开发中更有效地管理数据。
